<%# app/views/bravura_template_prime/shared/_search.html.erb %>
<div class="relative" data-controller="search">
  <button class="p-2 text-gray-500 hover:text-gray-700 focus:outline-none" data-action="click->search#toggleSearch">
    <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M21 21L17.364 17.364M17.364 17.364C18.9926 15.7353 20 13.4853 20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.4853 20 15.7353 18.9926 17.364 17.364Z" stroke-width="1.5" stroke-linecap="round"></path>
    </svg>
  </button>
  
  <div class="absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg overflow-hidden z-20 hidden" data-search-target="box">
    <%= form_with(url: bravura_template_prime.search_path, method: :get, local: true, class: "p-2", data: { turbo_frame: "search_results", action: "submit->search#search input->search#search" }) do |f| %>
      <%= f.text_field :query, placeholder: "Search...", autocomplete: "off", class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", data: { search_target: "input" } %>
    <% end %>
    
    <div class="max-h-96 overflow-y-auto" data-search-target="results"></div>
  </div>
</div>